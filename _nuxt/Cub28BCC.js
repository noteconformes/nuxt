import{z as O,A as _t,B as Dt,C as oe,D as Ye,E as De,G as w,d as L,H as q,I as wt,c as ie,J as Ce,F as _e,K as $t,L as Qe,M as Tt,N as Xe,O as Rt,r as J,P as ht,Q as Re,R as Le,w as P,S as z,e as le,U as c,V as de,W as Kt,f as te,X as pe,Y as we,Z as ft,$ as Pt,o as Ot,b as Nt,a0 as pt,a1 as Ht,a2 as jt,a3 as ae,a4 as Ne,a5 as gt,a6 as mt,a7 as Vt,y as vt,a8 as qt,a9 as He,aa as yt,ab as tt,ac as bt,ad as At,ae as zt,af as Et,ag as st,n as V,ah as ke,ai as nt,t as Ke,aj as je,ak as Ut,al as Wt,am as Gt,g as Pe,an as Ee,ao as Yt,ap as Qt,aq as Xt,ar as Jt,as as Zt,at as es,au as ts,av as ss,aw as ns,ax as is,ay as it,az as as,aA as ls,aB as rs,aC as os,aD as us}from"./171OD8ia.js";import{g as cs}from"./DiBS4tJE.js";import{u as ds,f as hs}from"./HgrjQKbN.js";function fs(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function ps(s){return O(()=>{var e;return _t(s)?!!((e=Dt(s))!=null&&e.closest("form")):!0})}const at=oe({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(s){const e=s,{primitiveElement:t,currentElement:i}=Ye(),a=O(()=>e.checked??e.value);return De(a,(n,l)=>{if(!i.value)return;const o=i.value,u=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(u,"value").set;if(r&&n!==l){const h=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});r.call(o,n),o.dispatchEvent(h),o.dispatchEvent(f)}}),(n,l)=>(L(),w(wt,q({ref_key:"primitiveElement",ref:t},{...e,...n.$attrs},{as:"input"}),null,16))}}),gs=oe({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(s){const e=s,t=O(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),i=O(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((a,n)=>typeof a=="object"?Object.entries(a).map(([l,o])=>({name:`[${e.name}][${n}][${l}]`,value:o})):{name:`[${e.name}][${n}]`,value:a}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([a,n])=>({name:`[${e.name}][${a}]`,value:n})):[]);return(a,n)=>t.value?(L(),w(at,q({key:a.name},{...e,...a.$attrs},{name:a.name,value:a.value}),null,16,["name","value"])):(L(!0),ie(_e,{key:1},Ce(i.value,l=>(L(),w(at,q({key:l.name,ref_for:!0},{...e,...a.$attrs},{name:l.name,value:l.value}),null,16,["name","value"]))),128))}});function ms(s,e,t){return s===void 0?!1:Array.isArray(s)?s.some(i=>xe(i,e,t)):xe(s,e,t)}function xe(s,e,t){return s===void 0||e===void 0?!1:typeof s=="string"?s===e:typeof t=="function"?t(s,e):typeof t=="string"?(s==null?void 0:s[t])===(e==null?void 0:e[t]):$t(s,e)}const[Je,vs]=Qe("ListboxRoot"),ys=oe({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(s,{expose:e,emit:t}){const i=s,a=t,{multiple:n,highlightOnHover:l,orientation:o,disabled:u,selectionBehavior:d,dir:r}=Tt(i),{getItems:h}=Xe({isProvider:!0}),{handleTypeaheadSearch:f}=ds(),{primitiveElement:y,currentElement:v}=Ye(),M=fs(),T=Rt(r),$=ps(v),R=J(),N=J(!1),I=J(!0),A=ht(i,"modelValue",a,{defaultValue:i.defaultValue??(n.value?[]:void 0),passive:i.modelValue===void 0,deep:!0});function _(m){if(N.value=!0,i.multiple){const S=Array.isArray(A.value)?[...A.value]:[],x=S.findIndex(D=>xe(D,m,i.by));i.selectionBehavior==="toggle"?(x===-1?S.push(m):S.splice(x,1),A.value=S):(A.value=[m],R.value=m)}else i.selectionBehavior==="toggle"&&xe(A.value,m,i.by)?A.value=void 0:A.value=m;setTimeout(()=>{N.value=!1},1)}const b=J(null),g=J(null),F=J(!1),k=J(!1),H=Re(),K=Re(),Q=Re();function C(){return h().map(m=>m.ref).filter(m=>m.dataset.disabled!=="")}function B(m,S=!0){if(!m)return;b.value=m,I.value&&b.value.focus(),S&&b.value.scrollIntoView({block:"nearest"});const x=h().find(D=>D.ref===m);a("highlight",x)}function U(m){if(F.value)Q.trigger(m);else{const S=h().find(x=>xe(x.value,m,i.by));S&&(b.value=S.ref,B(S.ref))}}function ne(m){b.value&&b.value.isConnected&&(m.preventDefault(),m.stopPropagation(),k.value||b.value.click())}function p(m){if(I.value){if(N.value=!0,F.value)K.trigger(m);else{const S=m.altKey||m.ctrlKey||m.metaKey;if(S&&m.key==="a"&&n.value){const x=h(),D=x.map(j=>j.value);A.value=[...D],m.preventDefault(),B(x[x.length-1].ref)}else if(!S){const x=f(m.key,h());x&&B(x)}}setTimeout(()=>{N.value=!1},1)}}function Z(){k.value=!0}function X(){requestAnimationFrame(()=>{k.value=!1})}function Fe(){Le(()=>{const m=new KeyboardEvent("keydown",{key:"PageUp"});me(m)})}function he(m){const S=b.value;S!=null&&S.isConnected&&(g.value=S),b.value=null,a("leave",m)}function Be(m){var x,D;const S=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((x=m.currentTarget)==null||x.dispatchEvent(S),a("entryFocus",S),!S.defaultPrevented)if(g.value)B(g.value);else{const j=(D=C())==null?void 0:D[0];B(j)}}function me(m){const S=cs(m,o.value,T.value);if(!S)return;let x=C();if(b.value){if(S==="last")x.reverse();else if(S==="prev"||S==="next"){S==="prev"&&x.reverse();const D=x.indexOf(b.value);x=x.slice(D+1)}Ie(m,x[0])}if(x.length){const D=!b.value&&S==="prev"?x.length-1:0;B(x[D])}if(F.value)return K.trigger(m)}function Ie(m,S){var D;if(!(F.value||i.selectionBehavior!=="replace"||!n.value||!Array.isArray(A.value)||(m.altKey||m.ctrlKey||m.metaKey)&&!m.shiftKey)&&m.shiftKey){const j=h().filter(W=>W.ref.dataset.disabled!=="");let G=(D=j.find(W=>W.ref===S))==null?void 0:D.value;if(m.key===M.END?G=j[j.length-1].value:m.key===M.HOME&&(G=j[0].value),!G||!R.value)return;const ee=hs(j.map(W=>W.value),R.value,G);A.value=ee}}async function ve(m){if(await Le(),F.value)H.trigger(m);else{const S=C(),x=S.find(D=>D.dataset.state==="checked");x?B(x):S.length&&B(S[0])}}return De(A,()=>{N.value||Le(()=>{ve()})},{immediate:!0,deep:!0}),e({highlightedElement:b,highlightItem:U,highlightFirstItem:Fe,highlightSelected:ve,getItems:h}),vs({modelValue:A,onValueChange:_,multiple:n,orientation:o,dir:T,disabled:u,highlightOnHover:l,highlightedElement:b,isVirtual:F,virtualFocusHook:H,virtualKeydownHook:K,virtualHighlightHook:Q,by:i.by,firstValue:R,selectionBehavior:d,focusable:I,onLeave:he,onEnter:Be,changeHighlight:B,onKeydownEnter:ne,onKeydownNavigation:me,onKeydownTypeAhead:p,onCompositionStart:Z,onCompositionEnd:X,highlightFirstItem:Fe}),(m,S)=>(L(),w(c(de),{ref_key:"primitiveElement",ref:y,as:m.as,"as-child":m.asChild,dir:c(T),"data-disabled":c(u)?"":void 0,onPointerleave:he,onFocusout:S[0]||(S[0]=async x=>{const D=x.relatedTarget||x.target;await Le(),b.value&&c(v)&&!c(v).contains(D)&&he(x)})},{default:P(()=>[z(m.$slots,"default",{modelValue:c(A)}),c($)&&m.name?(L(),w(c(gs),{key:0,name:m.name,value:c(A),disabled:c(u),required:m.required},null,8,["name","value","disabled","required"])):le("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),bs=oe({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(s){const{CollectionSlot:e}=Xe(),t=Je(),i=Kt(!1,10);return(a,n)=>(L(),w(c(e),null,{default:P(()=>[te(c(de),{role:"listbox",as:a.as,"as-child":a.asChild,tabindex:c(t).focusable.value?c(t).highlightedElement.value?"-1":"0":void 0,"aria-orientation":c(t).orientation.value,"aria-multiselectable":!!c(t).multiple.value,"data-orientation":c(t).orientation.value,onMousedown:n[0]||(n[0]=we(l=>i.value=!0,["left"])),onFocus:n[1]||(n[1]=l=>{c(i)||c(t).onEnter(l)}),onKeydown:[n[2]||(n[2]=pe(we(l=>{c(t).focusable.value&&c(t).onKeydownNavigation(l)},["prevent"]),["down","up","left","right","home","end"])),pe(c(t).onKeydownEnter,["enter"]),c(t).onKeydownTypeAhead]},{default:P(()=>[z(a.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[As,Es]=Qe("ListboxGroup"),Cs=oe({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(s){const e=s,t=ft(void 0,"reka-listbox-group");return Es({id:t}),(i,a)=>(L(),w(c(de),q({role:"group"},e,{"aria-labelledby":c(t)}),{default:P(()=>[z(i.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),xs=oe({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,a=ht(t,"modelValue",e,{defaultValue:"",passive:t.modelValue===void 0}),n=Je(),{primitiveElement:l,currentElement:o}=Ye(),u=O(()=>t.disabled||n.disabled.value||!1),d=J();return Pt(()=>{var r;return d.value=(r=n.highlightedElement.value)==null?void 0:r.id}),Ot(()=>{n.focusable.value=!1,setTimeout(()=>{var r;t.autoFocus&&((r=o.value)==null||r.focus())},1)}),Nt(()=>{n.focusable.value=!0}),(r,h)=>(L(),w(c(de),{ref_key:"primitiveElement",ref:l,as:r.as,"as-child":r.asChild,value:c(a),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":d.value,type:"text",onKeydown:[pe(we(c(n).onKeydownNavigation,["prevent"]),["down","up","home","end"]),pe(c(n).onKeydownEnter,["enter"])],onInput:h[0]||(h[0]=f=>{a.value=f.target.value,c(n).highlightFirstItem(f)}),onCompositionstart:c(n).onCompositionStart,onCompositionend:c(n).onCompositionEnd},{default:P(()=>[z(r.$slots,"default",{modelValue:c(a)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),Fs="listbox.select",[Bs,Is]=Qe("ListboxItem"),Ss=oe({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(s,{emit:e}){const t=s,i=e,a=ft(void 0,"reka-listbox-item"),{CollectionItem:n}=Xe(),{forwardRef:l,currentElement:o}=pt(),u=Je(),d=O(()=>o.value===u.highlightedElement.value),r=O(()=>ms(u.modelValue.value,t.value,u.by)),h=O(()=>u.disabled.value||t.disabled);async function f(v){i("select",v),!(v!=null&&v.defaultPrevented)&&!h.value&&v&&(u.onValueChange(t.value),u.changeHighlight(o.value))}function y(v){const M={originalEvent:v,value:t.value};jt(Fs,f,M)}return Is({isSelected:r}),(v,M)=>(L(),w(c(n),{value:v.value},{default:P(()=>[Ht([d.value,r.value],()=>te(c(de),q({id:c(a)},v.$attrs,{ref:c(l),role:"option",tabindex:c(u).focusable.value?d.value?"0":"-1":-1,"aria-selected":r.value,as:v.as,"as-child":v.asChild,disabled:h.value?"":void 0,"data-disabled":h.value?"":void 0,"data-highlighted":d.value?"":void 0,"data-state":r.value?"checked":"unchecked",onClick:y,onKeydown:pe(we(y,["prevent"]),["space"]),onPointermove:M[0]||(M[0]=T=>{c(u).highlightedElement.value!==c(o)&&(c(u).highlightOnHover.value?c(u).changeHighlight(c(o),!1):c(u).focusable.value||c(u).changeHighlight(c(o),!1))})}),{default:P(()=>[z(v.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),M,1)]),_:3},8,["value"]))}}),Ls=oe({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(s){const e=s;pt();const t=Bs();return(i,a)=>c(t).isSelected.value?(L(),w(c(de),q({key:0,"aria-hidden":"true"},e),{default:P(()=>[z(i.$slots,"default")]),_:3},16)):le("",!0)}}),ks=oe({__name:"ListboxGroupLabel",props:{for:{},asChild:{type:Boolean},as:{default:"div"}},setup(s){const e=s,t=As({id:""});return(i,a)=>(L(),w(c(de),q(e,{id:c(t).id}),{default:P(()=>[z(i.$slots,"default")]),_:3},16,["id"]))}});function re(s){return Array.isArray?Array.isArray(s):Ft(s)==="[object Array]"}function Ms(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-1/0?"-0":e}function _s(s){return s==null?"":Ms(s)}function se(s){return typeof s=="string"}function Ct(s){return typeof s=="number"}function Ds(s){return s===!0||s===!1||ws(s)&&Ft(s)=="[object Boolean]"}function xt(s){return typeof s=="object"}function ws(s){return xt(s)&&s!==null}function Y(s){return s!=null}function Oe(s){return!s.trim().length}function Ft(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const $s="Incorrect 'index' type",Ts=s=>`Invalid value for key ${s}`,Rs=s=>`Pattern length exceeds max of ${s}.`,Ks=s=>`Missing ${s} property in key`,Ps=s=>`Property 'weight' in key '${s}' must be a positive integer`,lt=Object.prototype.hasOwnProperty;class Os{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(i=>{let a=Bt(i);this._keys.push(a),this._keyMap[a.id]=a,t+=a.weight}),this._keys.forEach(i=>{i.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Bt(s){let e=null,t=null,i=null,a=1,n=null;if(se(s)||re(s))i=s,e=rt(s),t=Ve(s);else{if(!lt.call(s,"name"))throw new Error(Ks("name"));const l=s.name;if(i=l,lt.call(s,"weight")&&(a=s.weight,a<=0))throw new Error(Ps(l));e=rt(l),t=Ve(l),n=s.getFn}return{path:e,id:t,weight:a,src:i,getFn:n}}function rt(s){return re(s)?s:s.split(".")}function Ve(s){return re(s)?s.join("."):s}function Ns(s,e){let t=[],i=!1;const a=(n,l,o)=>{if(Y(n))if(!l[o])t.push(n);else{let u=l[o];const d=n[u];if(!Y(d))return;if(o===l.length-1&&(se(d)||Ct(d)||Ds(d)))t.push(_s(d));else if(re(d)){i=!0;for(let r=0,h=d.length;r<h;r+=1)a(d[r],l,o+1)}else l.length&&a(d,l,o+1)}};return a(s,se(e)?e.split("."):e,0),i?t:t[0]}const Hs={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},js={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},Vs={location:0,threshold:.6,distance:100},qs={useExtendedSearch:!1,getFn:Ns,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var E={...js,...Hs,...Vs,...qs};const zs=/[^ ]+/g;function Us(s=1,e=3){const t=new Map,i=Math.pow(10,e);return{get(a){const n=a.match(zs).length;if(t.has(n))return t.get(n);const l=1/Math.pow(n,.5*s),o=parseFloat(Math.round(l*i)/i);return t.set(n,o),o},clear(){t.clear()}}}class Ze{constructor({getFn:e=E.getFn,fieldNormWeight:t=E.fieldNormWeight}={}){this.norm=Us(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,se(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();se(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Y(e)||Oe(e))return;let i={v:e,i:t,n:this.norm.get(e)};this.records.push(i)}_addObject(e,t){let i={i:t,$:{}};this.keys.forEach((a,n)=>{let l=a.getFn?a.getFn(e):this.getFn(e,a.path);if(Y(l)){if(re(l)){let o=[];const u=[{nestedArrIndex:-1,value:l}];for(;u.length;){const{nestedArrIndex:d,value:r}=u.pop();if(Y(r))if(se(r)&&!Oe(r)){let h={v:r,i:d,n:this.norm.get(r)};o.push(h)}else re(r)&&r.forEach((h,f)=>{u.push({nestedArrIndex:f,value:h})})}i.$[n]=o}else if(se(l)&&!Oe(l)){let o={v:l,n:this.norm.get(l)};i.$[n]=o}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function It(s,e,{getFn:t=E.getFn,fieldNormWeight:i=E.fieldNormWeight}={}){const a=new Ze({getFn:t,fieldNormWeight:i});return a.setKeys(s.map(Bt)),a.setSources(e),a.create(),a}function Ws(s,{getFn:e=E.getFn,fieldNormWeight:t=E.fieldNormWeight}={}){const{keys:i,records:a}=s,n=new Ze({getFn:e,fieldNormWeight:t});return n.setKeys(i),n.setIndexRecords(a),n}function Me(s,{errors:e=0,currentLocation:t=0,expectedLocation:i=0,distance:a=E.distance,ignoreLocation:n=E.ignoreLocation}={}){const l=e/s.length;if(n)return l;const o=Math.abs(i-t);return a?l+o/a:o?1:l}function Gs(s=[],e=E.minMatchCharLength){let t=[],i=-1,a=-1,n=0;for(let l=s.length;n<l;n+=1){let o=s[n];o&&i===-1?i=n:!o&&i!==-1&&(a=n-1,a-i+1>=e&&t.push([i,a]),i=-1)}return s[n-1]&&n-i>=e&&t.push([i,n-1]),t}const ce=32;function Ys(s,e,t,{location:i=E.location,distance:a=E.distance,threshold:n=E.threshold,findAllMatches:l=E.findAllMatches,minMatchCharLength:o=E.minMatchCharLength,includeMatches:u=E.includeMatches,ignoreLocation:d=E.ignoreLocation}={}){if(e.length>ce)throw new Error(Rs(ce));const r=e.length,h=s.length,f=Math.max(0,Math.min(i,h));let y=n,v=f;const M=o>1||u,T=M?Array(h):[];let $;for(;($=s.indexOf(e,v))>-1;){let b=Me(e,{currentLocation:$,expectedLocation:f,distance:a,ignoreLocation:d});if(y=Math.min(b,y),v=$+r,M){let g=0;for(;g<r;)T[$+g]=1,g+=1}}v=-1;let R=[],N=1,I=r+h;const A=1<<r-1;for(let b=0;b<r;b+=1){let g=0,F=I;for(;g<F;)Me(e,{errors:b,currentLocation:f+F,expectedLocation:f,distance:a,ignoreLocation:d})<=y?g=F:I=F,F=Math.floor((I-g)/2+g);I=F;let k=Math.max(1,f-F+1),H=l?h:Math.min(f+F,h)+r,K=Array(H+2);K[H+1]=(1<<b)-1;for(let C=H;C>=k;C-=1){let B=C-1,U=t[s.charAt(B)];if(M&&(T[B]=+!!U),K[C]=(K[C+1]<<1|1)&U,b&&(K[C]|=(R[C+1]|R[C])<<1|1|R[C+1]),K[C]&A&&(N=Me(e,{errors:b,currentLocation:B,expectedLocation:f,distance:a,ignoreLocation:d}),N<=y)){if(y=N,v=B,v<=f)break;k=Math.max(1,2*f-v)}}if(Me(e,{errors:b+1,currentLocation:f,expectedLocation:f,distance:a,ignoreLocation:d})>y)break;R=K}const _={isMatch:v>=0,score:Math.max(.001,N)};if(M){const b=Gs(T,o);b.length?u&&(_.indices=b):_.isMatch=!1}return _}function Qs(s){let e={};for(let t=0,i=s.length;t<i;t+=1){const a=s.charAt(t);e[a]=(e[a]||0)|1<<i-t-1}return e}const $e=String.prototype.normalize?s=>s.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):s=>s;class St{constructor(e,{location:t=E.location,threshold:i=E.threshold,distance:a=E.distance,includeMatches:n=E.includeMatches,findAllMatches:l=E.findAllMatches,minMatchCharLength:o=E.minMatchCharLength,isCaseSensitive:u=E.isCaseSensitive,ignoreDiacritics:d=E.ignoreDiacritics,ignoreLocation:r=E.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:a,includeMatches:n,findAllMatches:l,minMatchCharLength:o,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:r},e=u?e:e.toLowerCase(),e=d?$e(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(y,v)=>{this.chunks.push({pattern:y,alphabet:Qs(y),startIndex:v})},f=this.pattern.length;if(f>ce){let y=0;const v=f%ce,M=f-v;for(;y<M;)h(this.pattern.substr(y,ce),y),y+=ce;if(v){const T=f-ce;h(this.pattern.substr(T),T)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:i,includeMatches:a}=this.options;if(e=t?e:e.toLowerCase(),e=i?$e(e):e,this.pattern===e){let M={isMatch:!0,score:0};return a&&(M.indices=[[0,e.length-1]]),M}const{location:n,distance:l,threshold:o,findAllMatches:u,minMatchCharLength:d,ignoreLocation:r}=this.options;let h=[],f=0,y=!1;this.chunks.forEach(({pattern:M,alphabet:T,startIndex:$})=>{const{isMatch:R,score:N,indices:I}=Ys(e,M,T,{location:n+$,distance:l,threshold:o,findAllMatches:u,minMatchCharLength:d,includeMatches:a,ignoreLocation:r});R&&(y=!0),f+=N,R&&I&&(h=[...h,...I])});let v={isMatch:y,score:y?f/this.chunks.length:1};return y&&a&&(v.indices=h),v}}class ue{constructor(e){this.pattern=e}static isMultiMatch(e){return ot(e,this.multiRegex)}static isSingleMatch(e){return ot(e,this.singleRegex)}search(){}}function ot(s,e){const t=s.match(e);return t?t[1]:null}class Xs extends ue{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Js extends ue{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class Zs extends ue{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class en extends ue{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class tn extends ue{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class sn extends ue{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Lt extends ue{constructor(e,{location:t=E.location,threshold:i=E.threshold,distance:a=E.distance,includeMatches:n=E.includeMatches,findAllMatches:l=E.findAllMatches,minMatchCharLength:o=E.minMatchCharLength,isCaseSensitive:u=E.isCaseSensitive,ignoreDiacritics:d=E.ignoreDiacritics,ignoreLocation:r=E.ignoreLocation}={}){super(e),this._bitapSearch=new St(e,{location:t,threshold:i,distance:a,includeMatches:n,findAllMatches:l,minMatchCharLength:o,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:r})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class kt extends ue{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,i;const a=[],n=this.pattern.length;for(;(i=e.indexOf(this.pattern,t))>-1;)t=i+n,a.push([i,t-1]);const l=!!a.length;return{isMatch:l,score:l?0:1,indices:a}}}const qe=[Xs,kt,Zs,en,sn,tn,Js,Lt],ut=qe.length,nn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,an="|";function ln(s,e={}){return s.split(an).map(t=>{let i=t.trim().split(nn).filter(n=>n&&!!n.trim()),a=[];for(let n=0,l=i.length;n<l;n+=1){const o=i[n];let u=!1,d=-1;for(;!u&&++d<ut;){const r=qe[d];let h=r.isMultiMatch(o);h&&(a.push(new r(h,e)),u=!0)}if(!u)for(d=-1;++d<ut;){const r=qe[d];let h=r.isSingleMatch(o);if(h){a.push(new r(h,e));break}}}return a})}const rn=new Set([Lt.type,kt.type]);class on{constructor(e,{isCaseSensitive:t=E.isCaseSensitive,ignoreDiacritics:i=E.ignoreDiacritics,includeMatches:a=E.includeMatches,minMatchCharLength:n=E.minMatchCharLength,ignoreLocation:l=E.ignoreLocation,findAllMatches:o=E.findAllMatches,location:u=E.location,threshold:d=E.threshold,distance:r=E.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:i,includeMatches:a,minMatchCharLength:n,findAllMatches:o,ignoreLocation:l,location:u,threshold:d,distance:r},e=t?e:e.toLowerCase(),e=i?$e(e):e,this.pattern=e,this.query=ln(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:a,ignoreDiacritics:n}=this.options;e=a?e:e.toLowerCase(),e=n?$e(e):e;let l=0,o=[],u=0;for(let d=0,r=t.length;d<r;d+=1){const h=t[d];o.length=0,l=0;for(let f=0,y=h.length;f<y;f+=1){const v=h[f],{isMatch:M,indices:T,score:$}=v.search(e);if(M){if(l+=1,u+=$,i){const R=v.constructor.type;rn.has(R)?o=[...o,...T]:o.push(T)}}else{u=0,l=0,o.length=0;break}}if(l){let f={isMatch:!0,score:u/l};return i&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const ze=[];function un(...s){ze.push(...s)}function Ue(s,e){for(let t=0,i=ze.length;t<i;t+=1){let a=ze[t];if(a.condition(s,e))return new a(s,e)}return new St(s,e)}const Te={AND:"$and",OR:"$or"},We={PATH:"$path",PATTERN:"$val"},Ge=s=>!!(s[Te.AND]||s[Te.OR]),cn=s=>!!s[We.PATH],dn=s=>!re(s)&&xt(s)&&!Ge(s),ct=s=>({[Te.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function Mt(s,e,{auto:t=!0}={}){const i=a=>{let n=Object.keys(a);const l=cn(a);if(!l&&n.length>1&&!Ge(a))return i(ct(a));if(dn(a)){const u=l?a[We.PATH]:n[0],d=l?a[We.PATTERN]:a[u];if(!se(d))throw new Error(Ts(u));const r={keyId:Ve(u),pattern:d};return t&&(r.searcher=Ue(d,e)),r}let o={children:[],operator:n[0]};return n.forEach(u=>{const d=a[u];re(d)&&d.forEach(r=>{o.children.push(i(r))})}),o};return Ge(s)||(s=ct(s)),i(s)}function hn(s,{ignoreFieldNorm:e=E.ignoreFieldNorm}){s.forEach(t=>{let i=1;t.matches.forEach(({key:a,norm:n,score:l})=>{const o=a?a.weight:null;i*=Math.pow(l===0&&o?Number.EPSILON:l,(o||1)*(e?1:n))}),t.score=i})}function fn(s,e){const t=s.matches;e.matches=[],Y(t)&&t.forEach(i=>{if(!Y(i.indices)||!i.indices.length)return;const{indices:a,value:n}=i;let l={indices:a,value:n};i.key&&(l.key=i.key.src),i.idx>-1&&(l.refIndex=i.idx),e.matches.push(l)})}function pn(s,e){e.score=s.score}function gn(s,e,{includeMatches:t=E.includeMatches,includeScore:i=E.includeScore}={}){const a=[];return t&&a.push(fn),i&&a.push(pn),s.map(n=>{const{idx:l}=n,o={item:e[l],refIndex:l};return a.length&&a.forEach(u=>{u(n,o)}),o})}class ge{constructor(e,t={},i){this.options={...E,...t},this.options.useExtendedSearch,this._keyStore=new Os(this.options.keys),this.setCollection(e,i)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Ze))throw new Error($s);this._myIndex=t||It(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Y(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let i=0,a=this._docs.length;i<a;i+=1){const n=this._docs[i];e(n,i)&&(this.removeAt(i),i-=1,a-=1,t.push(n))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:i,includeScore:a,shouldSort:n,sortFn:l,ignoreFieldNorm:o}=this.options;let u=se(e)?se(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return hn(u,{ignoreFieldNorm:o}),n&&u.sort(l),Ct(t)&&t>-1&&(u=u.slice(0,t)),gn(u,this._docs,{includeMatches:i,includeScore:a})}_searchStringList(e){const t=Ue(e,this.options),{records:i}=this._myIndex,a=[];return i.forEach(({v:n,i:l,n:o})=>{if(!Y(n))return;const{isMatch:u,score:d,indices:r}=t.searchIn(n);u&&a.push({item:n,idx:l,matches:[{score:d,value:n,norm:o,indices:r}]})}),a}_searchLogical(e){const t=Mt(e,this.options),i=(o,u,d)=>{if(!o.children){const{keyId:h,searcher:f}=o,y=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(u,h),searcher:f});return y&&y.length?[{idx:d,item:u,matches:y}]:[]}const r=[];for(let h=0,f=o.children.length;h<f;h+=1){const y=o.children[h],v=i(y,u,d);if(v.length)r.push(...v);else if(o.operator===Te.AND)return[]}return r},a=this._myIndex.records,n={},l=[];return a.forEach(({$:o,i:u})=>{if(Y(o)){let d=i(t,o,u);d.length&&(n[u]||(n[u]={idx:u,item:o,matches:[]},l.push(n[u])),d.forEach(({matches:r})=>{n[u].matches.push(...r)}))}}),l}_searchObjectList(e){const t=Ue(e,this.options),{keys:i,records:a}=this._myIndex,n=[];return a.forEach(({$:l,i:o})=>{if(!Y(l))return;let u=[];i.forEach((d,r)=>{u.push(...this._findMatches({key:d,value:l[r],searcher:t}))}),u.length&&n.push({idx:o,item:l,matches:u})}),n}_findMatches({key:e,value:t,searcher:i}){if(!Y(t))return[];let a=[];if(re(t))t.forEach(({v:n,i:l,n:o})=>{if(!Y(n))return;const{isMatch:u,score:d,indices:r}=i.searchIn(n);u&&a.push({score:d,key:e,value:n,idx:l,norm:o,indices:r})});else{const{v:n,n:l}=t,{isMatch:o,score:u,indices:d}=i.searchIn(n);o&&a.push({score:u,key:e,value:n,norm:l,indices:d})}return a}}ge.version="7.1.0";ge.createIndex=It;ge.parseIndex=Ws;ge.config=E;ge.parseQuery=Mt;un(on);function mn(s,e,t){const i=()=>{var l,o;return new ge((l=ae(e))!=null?l:[],(o=ae(t))==null?void 0:o.fuseOptions)},a=J(i());De(()=>{var l;return(l=ae(t))==null?void 0:l.fuseOptions},()=>{a.value=i()},{deep:!0}),De(()=>ae(e),l=>{a.value.setCollection(l)},{deep:!0});const n=O(()=>{const l=ae(t);if(l!=null&&l.matchAllWhenSearchEmpty&&!ae(s))return ae(e).map((u,d)=>({item:u,refIndex:d}));const o=l==null?void 0:l.resultLimit;return a.value.search(ae(s),o?{limit:o}:void 0)});return{fuse:a,results:n}}function vn(s,e){let t="",i=0,a=!1;for(let n=s.length-1;n>=0;n--){if(s[n]===">")a=!0;else if(s[n]==="<"){a=!1,t=s[n]+t;continue}if(a||i++,i<=e)t=s[n]+t;else{t="..."+t;break}}return t}function dt(s,e,t,i){var n;function a(l,o=[]){l=l||"";let u="",d=0;o.forEach(h=>{if(h.length===2&&h[0]===h[1])return;const f=h[1]+1,y=f-h[0]>=e.length;u+=[l.substring(d,h[0]),y&&"<mark>",l.substring(h[0],f),y&&"</mark>"].filter(Boolean).join(""),d=f}),u+=l.substring(d);const r=u.indexOf("<mark>");return r!==-1&&(u=vn(u,u.length-r)),u}if((n=s.matches)!=null&&n.length){for(const l of s.matches)if(!(t&&l.key!==t)&&!(i!=null&&i.includes(l.key)))return a(l.value,l.indices)}}const yn={slots:{root:"flex flex-col min-h-0 min-w-0 divide-y divide-default",input:"[&>input]:h-12",close:"",back:"p-0",content:"relative overflow-hidden flex flex-col",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1 focus:outline-none",group:"p-1 isolate",empty:"py-6 text-center text-sm text-muted",label:"p-1.5 text-xs font-semibold text-highlighted",item:"group relative w-full flex items-center gap-1.5 p-1.5 text-sm select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0 size-5",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"2xs",itemLeadingChip:"shrink-0 size-5",itemLeadingChipSize:"md",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0 size-5",itemTrailingHighlightedIcon:"shrink-0 size-5 text-dimmed hidden group-data-highlighted:inline-flex",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0 gap-0.5",itemTrailingKbdsSize:"md",itemLabel:"truncate space-x-1 rtl:space-x-reverse text-dimmed",itemLabelBase:"text-highlighted [&>mark]:text-inverted [&>mark]:bg-primary",itemLabelPrefix:"text-default",itemLabelSuffix:"text-dimmed [&>mark]:text-inverted [&>mark]:bg-primary"},variants:{active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:not-data-disabled:text-highlighted data-highlighted:not-data-disabled:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:not-group-data-disabled:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}}}},bn=["innerHTML"],An=["innerHTML"],En={__name:"UCommandPalette",props:Ne({as:{type:null,required:!1},icon:{type:String,required:!1},selectedIcon:{type:String,required:!1},trailingIcon:{type:String,required:!1},placeholder:{type:String,required:!1},autofocus:{type:Boolean,required:!1,default:!0},close:{type:[Boolean,Object],required:!1},closeIcon:{type:String,required:!1},back:{type:[Boolean,Object],required:!1,default:!0},backIcon:{type:String,required:!1},groups:{type:Array,required:!1},fuse:{type:Object,required:!1},labelKey:{type:String,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1},multiple:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},modelValue:{type:null,required:!1,default:""},defaultValue:{type:null,required:!1},highlightOnHover:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:Ne(["update:modelValue","highlight","entryFocus","leave","update:open"],["update:searchTerm"]),setup(s,{emit:e}){const t=s,i=e,a=gt(),n=mt(s,"searchTerm",{type:String,default:""}),{t:l}=Vt(),o=vt(),u=qt(He(t,"as","disabled","multiple","modelValue","defaultValue","highlightOnHover","selectionBehavior"),i),d=yt(He(t,"loading","loadingIcon")),r=O(()=>{var g;return tt({extend:tt(yn),...((g=o.ui)==null?void 0:g.commandPalette)||{}})()}),h=O(()=>bt({},t.fuse,{fuseOptions:{ignoreLocation:!0,threshold:.1,keys:[t.labelKey,"suffix"]},resultLimit:12,matchAllWhenSearchEmpty:!0})),f=J([]),y=O(()=>{var g;return((g=f.value[f.value.length-1])==null?void 0:g.placeholder)||t.placeholder||l("commandPalette.placeholder")}),v=O(()=>{var g;return(g=f.value)!=null&&g.length?[f.value[f.value.length-1]]:t.groups}),M=O(()=>{var g,F;return((F=(g=v.value)==null?void 0:g.filter(k=>k.id?!k.ignoreFilter:(console.warn("[@nuxt/ui] CommandPalette group is missing an `id` property"),!1)))==null?void 0:F.flatMap(k=>{var H;return((H=k.items)==null?void 0:H.map(K=>({...K,group:k.id})))||[]}))||[]}),{results:T}=mn(n,M,h);function $(g,F){return g!=null&&g.postFilter&&typeof g.postFilter=="function"&&(F=g.postFilter(n.value,F)),{...g,items:F.slice(0,h.value.resultLimit).map(k=>({...k,labelHtml:dt(k,n.value,t.labelKey),suffixHtml:dt(k,n.value,void 0,[t.labelKey])}))}}const R=O(()=>{var H,K,Q;const g=T.value.reduce((C,B)=>{var p,Z;const{item:U,matches:ne}=B;return U.group&&(C[p=U.group]||(C[p]=[]),(Z=C[U.group])==null||Z.push({...U,matches:ne})),C},{}),F=Object.entries(g).map(([C,B])=>{var ne;const U=(ne=v.value)==null?void 0:ne.find(p=>p.id===C);if(U)return $(U,B)}).filter(C=>!!C);return(((Q=(K=(H=v.value)==null?void 0:H.map((C,B)=>({...C,index:B})))==null?void 0:K.filter(C=>{var B;return C.ignoreFilter&&((B=C.items)==null?void 0:B.length)}))==null?void 0:Q.map(C=>({...$(C,C.items||[]),index:C.index})))||[]).reduce((C,B)=>(C.splice(B.index,0,B),C),[...F])}),N=At("listboxRootRef");function I(g){var F,k;(F=g.children)!=null&&F.length&&(f.value.push({id:`history-${f.value.length}`,label:g.label,slot:g.slot,placeholder:g.placeholder,items:g.children}),n.value="",(k=N.value)==null||k.highlightFirstItem())}function A(){var g;f.value.length&&(f.value.pop(),n.value="",(g=N.value)==null||g.highlightFirstItem())}function _(){n.value||A()}function b(g,F){var k,H;(k=F.children)!=null&&k.length?(g.preventDefault(),I(F)):(H=F.onSelect)==null||H.call(F,g)}return(g,F)=>{var k;return L(),w(c(ys),q(c(u),{ref_key:"listboxRootRef",ref:N,class:r.value.root({class:[(k=t.ui)==null?void 0:k.root,t.class]})}),{default:P(()=>{var H;return[te(c(xs),{modelValue:n.value,"onUpdate:modelValue":F[1]||(F[1]=K=>n.value=K),"as-child":""},{default:P(()=>{var K,Q;return[te(zt,q({placeholder:y.value,variant:"none",autofocus:s.autofocus},c(d),{icon:s.icon||c(o).ui.icons.search,class:r.value.input({class:(K=t.ui)==null?void 0:K.input}),onKeydown:pe(_,["backspace"])}),Et({_:2},[(Q=f.value)!=null&&Q.length&&(s.back||a.back)?{name:"leading",fn:P(()=>[z(g.$slots,"back",{ui:r.value},()=>{var C;return[te(st,q({icon:s.backIcon||c(o).ui.icons.arrowLeft,color:"neutral",variant:"link","aria-label":c(l)("commandPalette.back")},typeof s.back=="object"?s.back:{},{class:r.value.back({class:(C=t.ui)==null?void 0:C.back}),onClick:A}),null,16,["icon","aria-label","class"])]})]),key:"0"}:void 0,s.close||a.close?{name:"trailing",fn:P(()=>[z(g.$slots,"close",{ui:r.value},()=>{var C;return[s.close?(L(),w(st,q({key:0,icon:s.closeIcon||c(o).ui.icons.close,color:"neutral",variant:"ghost","aria-label":c(l)("commandPalette.close")},typeof s.close=="object"?s.close:{},{class:r.value.close({class:(C=t.ui)==null?void 0:C.close}),onClick:F[0]||(F[0]=B=>i("update:open",!1))}),null,16,["icon","aria-label","class"])):le("",!0)]})]),key:"1"}:void 0]),1040,["placeholder","autofocus","icon","class"])]}),_:3},8,["modelValue"]),te(c(bs),{class:V(r.value.content({class:(H=t.ui)==null?void 0:H.content}))},{default:P(()=>{var K,Q,C;return[(K=R.value)!=null&&K.length?(L(),ie("div",{key:0,role:"presentation",class:V(r.value.viewport({class:(Q=t.ui)==null?void 0:Q.viewport}))},[(L(!0),ie(_e,null,Ce(R.value,B=>{var U;return L(),w(c(Cs),{key:`group-${B.id}`,class:V(r.value.group({class:(U=t.ui)==null?void 0:U.group}))},{default:P(()=>{var ne;return[c(ke)(B,t.labelKey)?(L(),w(c(ks),{key:0,class:V(r.value.label({class:(ne=t.ui)==null?void 0:ne.label}))},{default:P(()=>[nt(Ke(c(ke)(B,t.labelKey)),1)]),_:2},1032,["class"])):le("",!0),(L(!0),ie(_e,null,Ce(B.items,(p,Z)=>(L(),w(c(Ss),{key:`group-${B.id}-${Z}`,value:c(je)(p,["matches","group","onSelect","labelHtml","suffixHtml","children"]),disabled:p.disabled,"as-child":"",onSelect:X=>b(X,p)},{default:P(()=>[te(Ut,q({ref_for:!0},c(Wt)(p),{custom:""}),{default:P(({active:X,...Fe})=>{var he,Be;return[te(Gt,q({ref_for:!0},Fe,{class:r.value.item({class:[(he=t.ui)==null?void 0:he.item,(Be=p.ui)==null?void 0:Be.item,p.class],active:X||p.active})}),{default:P(()=>[z(g.$slots,p.slot||B.slot||"item",{item:p,index:Z},()=>{var me,Ie,ve,m,S;return[z(g.$slots,p.slot?`${p.slot}-leading`:B.slot?`${B.slot}-leading`:"item-leading",{item:p,index:Z},()=>{var x,D,j,G,ee,W,ye,fe,Se,be,Ae,et;return[p.loading?(L(),w(Ee,{key:0,name:s.loadingIcon||c(o).ui.icons.loading,class:V(r.value.itemLeadingIcon({class:[(x=t.ui)==null?void 0:x.itemLeadingIcon,(D=p.ui)==null?void 0:D.itemLeadingIcon],loading:!0}))},null,8,["name","class"])):p.icon?(L(),w(Ee,{key:1,name:p.icon,class:V(r.value.itemLeadingIcon({class:[(j=t.ui)==null?void 0:j.itemLeadingIcon,(G=p.ui)==null?void 0:G.itemLeadingIcon],active:X||p.active}))},null,8,["name","class"])):p.avatar?(L(),w(Yt,q({key:2,size:((ee=p.ui)==null?void 0:ee.itemLeadingAvatarSize)||((W=t.ui)==null?void 0:W.itemLeadingAvatarSize)||r.value.itemLeadingAvatarSize()},{ref_for:!0},p.avatar,{class:r.value.itemLeadingAvatar({class:[(ye=t.ui)==null?void 0:ye.itemLeadingAvatar,(fe=p.ui)==null?void 0:fe.itemLeadingAvatar],active:X||p.active})}),null,16,["size","class"])):p.chip?(L(),w(Qt,q({key:3,size:((Se=p.ui)==null?void 0:Se.itemLeadingChipSize)||((be=t.ui)==null?void 0:be.itemLeadingChipSize)||r.value.itemLeadingChipSize(),inset:"",standalone:""},{ref_for:!0},p.chip,{class:r.value.itemLeadingChip({class:[(Ae=t.ui)==null?void 0:Ae.itemLeadingChip,(et=p.ui)==null?void 0:et.itemLeadingChip],active:X||p.active})}),null,16,["size","class"])):le("",!0)]}),p.labelHtml||c(ke)(p,t.labelKey)||a[p.slot?`${p.slot}-label`:B.slot?`${B.slot}-label`:"item-label"]?(L(),ie("span",{key:0,class:V(r.value.itemLabel({class:[(me=t.ui)==null?void 0:me.itemLabel,(Ie=p.ui)==null?void 0:Ie.itemLabel],active:X||p.active}))},[z(g.$slots,p.slot?`${p.slot}-label`:B.slot?`${B.slot}-label`:"item-label",{item:p,index:Z},()=>{var x,D,j,G,ee,W;return[p.prefix?(L(),ie("span",{key:0,class:V(r.value.itemLabelPrefix({class:[(x=t.ui)==null?void 0:x.itemLabelPrefix,(D=p.ui)==null?void 0:D.itemLabelPrefix]}))},Ke(p.prefix),3)):le("",!0),Pe("span",{class:V(r.value.itemLabelBase({class:[(j=t.ui)==null?void 0:j.itemLabelBase,(G=p.ui)==null?void 0:G.itemLabelBase],active:X||p.active})),innerHTML:p.labelHtml||c(ke)(p,t.labelKey)},null,10,bn),Pe("span",{class:V(r.value.itemLabelSuffix({class:[(ee=t.ui)==null?void 0:ee.itemLabelSuffix,(W=p.ui)==null?void 0:W.itemLabelSuffix],active:X||p.active})),innerHTML:p.suffixHtml||p.suffix},null,10,An)]})],2)):le("",!0),Pe("span",{class:V(r.value.itemTrailing({class:[(ve=t.ui)==null?void 0:ve.itemTrailing,(m=p.ui)==null?void 0:m.itemTrailing]}))},[z(g.$slots,p.slot?`${p.slot}-trailing`:B.slot?`${B.slot}-trailing`:"item-trailing",{item:p,index:Z},()=>{var x,D,j,G,ee,W,ye;return[p.children&&p.children.length>0?(L(),w(Ee,{key:0,name:s.trailingIcon||c(o).ui.icons.chevronRight,class:V(r.value.itemTrailingIcon({class:[(x=t.ui)==null?void 0:x.itemTrailingIcon,(D=p.ui)==null?void 0:D.itemTrailingIcon]}))},null,8,["name","class"])):(j=p.kbds)!=null&&j.length?(L(),ie("span",{key:1,class:V(r.value.itemTrailingKbds({class:[(G=t.ui)==null?void 0:G.itemTrailingKbds,(ee=p.ui)==null?void 0:ee.itemTrailingKbds]}))},[(L(!0),ie(_e,null,Ce(p.kbds,(fe,Se)=>{var be,Ae;return L(),w(Xt,q({key:Se,size:((be=p.ui)==null?void 0:be.itemTrailingKbdsSize)||((Ae=t.ui)==null?void 0:Ae.itemTrailingKbdsSize)||r.value.itemTrailingKbdsSize()},{ref_for:!0},typeof fe=="string"?{value:fe}:fe),null,16,["size"])}),128))],2)):B.highlightedIcon?(L(),w(Ee,{key:2,name:B.highlightedIcon,class:V(r.value.itemTrailingHighlightedIcon({class:[(W=t.ui)==null?void 0:W.itemTrailingHighlightedIcon,(ye=p.ui)==null?void 0:ye.itemTrailingHighlightedIcon]}))},null,8,["name","class"])):le("",!0)]}),(S=p.children)!=null&&S.length?le("",!0):(L(),w(c(Ls),{key:0,"as-child":""},{default:P(()=>{var x,D;return[te(Ee,{name:s.selectedIcon||c(o).ui.icons.check,class:V(r.value.itemTrailingIcon({class:[(x=t.ui)==null?void 0:x.itemTrailingIcon,(D=p.ui)==null?void 0:D.itemTrailingIcon]}))},null,8,["name","class"])]}),_:2},1024))],2)]})]),_:2},1040,["class"])]}),_:2},1040)]),_:2},1032,["value","disabled","onSelect"]))),128))]}),_:2},1032,["class"])}),128))],2)):(L(),ie("div",{key:1,class:V(r.value.empty({class:(C=t.ui)==null?void 0:C.empty}))},[z(g.$slots,"empty",{searchTerm:n.value},()=>[nt(Ke(n.value?c(l)("commandPalette.noMatch",{searchTerm:n.value}):c(l)("commandPalette.noData")),1)])],2))]}),_:3},8,["class"])]}),_:3},16,["class"])}}},Cn={slots:{modal:"sm:max-w-3xl sm:h-[28rem]",input:"[&>input]:text-base/5"}},xn=/^[^-]+.*-.*[^-]+$/,Fn=/^[^_]+.*_.*[^_]+$/;function Bn(s,e={}){const t=J([]),i=()=>{t.value.splice(0,t.value.length)},a=Jt(i,e.chainDelay??800),{macOS:n}=Zt(),l=es(),o=r=>{if(!r.key)return;const h=/^[a-z]{1}$/i.test(r.key);let f;if(t.value.push(r.key),t.value.length>=2){f=t.value.slice(-2).join("-");for(const y of d.value.filter(v=>v.chained))if(y.key===f){y.enabled&&(r.preventDefault(),y.handler(r)),i();return}}for(const y of d.value.filter(v=>!v.chained))if(r.key.toLowerCase()===y.key&&r.metaKey===y.metaKey&&r.ctrlKey===y.ctrlKey&&!(h&&r.shiftKey!==y.shiftKey)){y.enabled&&(r.preventDefault(),y.handler()),i();return}a()},u=O(()=>{var y,v,M;const r=(y=l.value)==null?void 0:y.tagName,h=(v=l.value)==null?void 0:v.contentEditable;return r==="INPUT"||r==="TEXTAREA"||h==="true"||h==="plaintext-only"?((M=l.value)==null?void 0:M.name)||!0:!1}),d=O(()=>Object.entries(ae(s)).map(([r,h])=>{var M,T;if(!h)return null;let f;r.includes("-")&&r!=="-"&&!r.includes("_")&&!((M=r.match(xn))!=null&&M.length)&&console.trace(`[Shortcut] Invalid key: "${r}"`),r.includes("_")&&r!=="_"&&!((T=r.match(Fn))!=null&&T.length)&&console.trace(`[Shortcut] Invalid key: "${r}"`);const y=r.includes("-")&&r!=="-"&&!r.includes("_");if(y)f={key:r.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const $=r.toLowerCase().split("_").map(R=>R);f={key:$.filter(R=>!["meta","command","ctrl","shift","alt","option"].includes(R)).join("_"),metaKey:$.includes("meta")||$.includes("command"),ctrlKey:$.includes("ctrl"),shiftKey:$.includes("shift"),altKey:$.includes("alt")||$.includes("option")}}if(f.chained=y,!n.value&&f.metaKey&&!f.ctrlKey&&(f.metaKey=!1,f.ctrlKey=!0),typeof h=="function"?f.handler=h:typeof h=="object"&&(f={...f,handler:h.handler}),!f.handler)return console.trace("[Shortcut] Invalid value"),null;let v=!0;return h.usingInput?typeof h.usingInput=="string"&&(v=u.value===h.usingInput):v=!u.value,f.enabled=v,f}).filter(Boolean));return ts("keydown",o)}const kn={__name:"UContentSearch",props:Ne({icon:{type:String,required:!1},placeholder:{type:null,required:!1},autofocus:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:String,required:!1},shortcut:{type:String,required:!1,default:"meta_k"},links:{type:Array,required:!1},navigation:{type:Array,required:!1},groups:{type:Array,required:!1},files:{type:Array,required:!1},fuse:{type:Object,required:!1},colorMode:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:void 0,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:["update:searchTerm"],setup(s,{expose:e}){const t=s,i=gt(),a=mt(s,"searchTerm",{type:String,default:""}),{t:n}=ss(),{open:l}=ns(),o=is(),u=vt(),d=yt(He(t,"icon","placeholder","autofocus","loading","loadingIcon","close","closeIcon")),r=je(i,["content"]),h=O(()=>bt({},t.fuse,{fuseOptions:{includeMatches:!0}})),f=O(()=>{var I;return it({extend:it(Cn),...((I=u.uiPro)==null?void 0:I.contentSearch)||{}})()});function y(I){return I.flatMap(A=>{var _;return[{...A,suffix:A.description,icon:A.icon||u.ui.icons.file},...((_=A.children)==null?void 0:_.map(b=>({...b,prefix:A.label+" >",suffix:b.description,icon:b.icon||A.icon||u.ui.icons.file})))||[]]})}function v(I,A){return I.flatMap(_=>{var b,g,F;return(b=_.children)!=null&&b.length?v(_.children,_):((F=(g=t.files)==null?void 0:g.filter(k=>k.id===_.path||k.id.startsWith(`${_.path}#`)))==null?void 0:F.map(k=>M(k,_,A)))||[]})}function M(I,A,_){const b=[...new Set([_==null?void 0:_.title,...I.titles].filter(Boolean))];return{prefix:b!=null&&b.length?b.join(" > ")+" >":void 0,label:I.id===A.path?A.title:I.title,suffix:I.content.replaceAll("<","&lt;").replaceAll(">","&gt;"),to:I.id,icon:A.icon||(_==null?void 0:_.icon)||(I.level>1?u.ui.icons.hash:u.ui.icons.file),level:I.level}}const T=O(()=>{var A,_;const I=[];return(A=t.links)!=null&&A.length&&I.push({id:"links",label:n("contentSearch.links"),items:y(t.links)}),(_=t.navigation)!=null&&_.length&&(t.navigation.some(b=>{var g;return!!((g=b.children)!=null&&g.length)})?I.push(...t.navigation.map(b=>({id:b.path,label:b.title,items:v(b.children||[]),postFilter:$}))):I.push({id:"docs",items:v(t.navigation),postFilter:$})),I.push(...t.groups||[]),t.colorMode&&!(o!=null&&o.forced)&&I.push({id:"theme",label:n("contentSearch.theme"),items:[{label:n("colorMode.system"),icon:u.ui.icons.system,active:o.preference==="system",onSelect:()=>{o.preference="system"}},{label:n("colorMode.light"),icon:u.ui.icons.light,active:o.preference==="light",onSelect:()=>{o.preference="light"}},{label:n("colorMode.dark"),icon:u.ui.icons.dark,active:o.preference==="dark",onSelect:()=>{o.preference="dark"}}]}),I});function $(I,A){return I?A:A==null?void 0:A.filter(_=>_.level===1)}function R(I){I.disabled||(l.value=!1,a.value="")}Bn({[t.shortcut]:{usingInput:!0,handler:()=>l.value=!l.value}});const N=At("commandPaletteRef");return e({commandPaletteRef:N}),(I,A)=>{const _=En,b=us;return L(),w(b,{open:c(l),"onUpdate:open":A[2]||(A[2]=g=>os(l)?l.value=g:null),title:c(n)("contentSearch.title"),description:c(n)("contentSearch.description"),class:V(f.value.modal({class:t.class}))},{content:P(()=>[z(I.$slots,"content",{},()=>[te(_,q({ref_key:"commandPaletteRef",ref:N,"search-term":a.value,"onUpdate:searchTerm":A[0]||(A[0]=g=>a.value=g)},c(d),{groups:T.value,fuse:h.value,ui:c(as)(c(je)(f.value,["modal"]),t.ui),"onUpdate:modelValue":R,"onUpdate:open":A[1]||(A[1]=g=>l.value=g)}),Et({_:2},[Ce(c(r),(g,F)=>({name:F,fn:P(k=>[z(I.$slots,F,ls(rs(k)))])}))]),1040,["search-term","groups","fuse","ui"])])]),_:3},8,["open","title","description","class"])}}};export{kn as default};
